<section class="sm:w-1/2 lg:w-5/6 mx-auto py-8">
  <article class="px-4 sm:px-8 lg:px-16" id="faqSection">
    <h1 class="text-2xl sm:text-3xl">Preguntas Frecuentes</h1>
    <p class="text-base sm:text-lg mb-8">
      Encuentra respuestas a preguntas comunes sobre nuestros servicios de
      desarrollo y mantenimiento.
    </p>

    <!-- Vista desktop: Grid de FAQ (visible solo en tablet/desktop) -->
    <div
      class="hidden sm:grid grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8 my-8"
    >
      <div
        *ngFor="let faq of displayedFAQs; let i = index"
        class="relative overflow-hidden rounded-lg shadow-lg transition-all duration-500 transform"
        [ngClass]="{
          'scale-95 opacity-0': isFAQChanging && i === currentFAQChangingIndex,
          'scale-100 opacity-100': !(
            isFAQChanging && i === currentFAQChangingIndex
          )
        }"
      >
        <div
          [ngClass]="faq.bgClass || 'bg-gray-800'"
          class="p-6 h-full flex flex-col"
        >
          <!-- Categoría -->
          <div class="mb-3">
            <span
              class="text-xs font-semibold text-white/70 uppercase tracking-wider"
            >
              {{ faq.category }}
            </span>
          </div>

          <!-- Pregunta -->
          <h3 class="text-lg font-bold text-white mb-4 leading-tight">
            {{ faq.question }}
          </h3>

          <!-- Respuesta -->
          <p class="text-gray-100 text-sm leading-relaxed flex-grow">
            {{ faq.answer }}
          </p>

          <!-- Icono decorativo -->
          <div class="mt-4 flex justify-end">
            <button
              class="w-8 h-8 bg-white/10 rounded-full flex items-center justify-center"
              (click)="onContactClick()"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-4 w-4 text-white"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Vista móvil: Carrusel de FAQs (visible solo en móvil) -->
    <div class="block sm:hidden relative my-8">
      <!-- Contenedor del carrusel -->
      <div class="overflow-hidden">
        <div
          class="flex snap-x snap-mandatory w-full overflow-hidden scrollbar-hide"
          style="scroll-behavior: smooth"
          id="faqCarousel"
        >
          <ng-container *ngFor="let faq of displayedFAQs; let i = index">
            <div
              class="w-full flex-shrink-0 snap-center px-2 transition-all duration-500"
              [ngClass]="{
                'opacity-0 scale-95':
                  isFAQChanging && i === currentFAQChangingIndex,
                'opacity-100 scale-100': !(
                  isFAQChanging && i === currentFAQChangingIndex
                )
              }"
            >
              <div
                [ngClass]="faq.bgClass || 'bg-gray-800'"
                class="rounded-lg shadow-lg p-6 h-full flex flex-col"
              >
                <!-- Categoría -->
                <div class="mb-3">
                  <span
                    class="text-xs font-semibold text-white/70 uppercase tracking-wider"
                  >
                    {{ faq.category }}
                  </span>
                </div>

                <!-- Pregunta -->
                <h3 class="text-lg font-bold text-white mb-4 leading-tight">
                  {{ faq.question }}
                </h3>

                <!-- Respuesta -->
                <p class="text-gray-100 text-sm leading-relaxed flex-grow">
                  {{ faq.answer }}
                </p>

                <!-- Icono decorativo -->
                <div class="mt-4 flex justify-end">
                  <button
                    class="w-8 h-8 bg-white/10 rounded-full flex items-center justify-center"
                    (click)="onContactClick()"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="h-4 w-4 text-white"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>

      <!-- Indicadores del carrusel (solo móvil) -->
      <div class="flex justify-center mt-6">
        <ng-container *ngFor="let faq of displayedFAQs; let i = index">
          <div
            class="mx-1 w-2 h-2 rounded-full cursor-pointer transition-all"
            [ngClass]="{
              'bg-sky-500': i === currentMobileFAQIndex,
              'bg-gray-500': i !== currentMobileFAQIndex
            }"
            (click)="scrollToFAQ(i)"
          ></div>
        </ng-container>
      </div>
    </div>
  </article>
</section>
